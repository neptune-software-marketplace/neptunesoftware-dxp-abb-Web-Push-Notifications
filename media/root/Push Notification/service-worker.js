data:text/javascript;base64,c2VsZi5hZGRFdmVudExpc3RlbmVyKCJpbnN0YWxsIiwgKGV2ZW50KSA9PiB7CiAgICAvL2NvbnNvbGUubG9nKCJzdyIsIGV2ZW50KTsKICAgIHNlbGYuc2tpcFdhaXRpbmcoKTsKfSk7CgpzZWxmLmFkZEV2ZW50TGlzdGVuZXIoImFjdGl2YXRlIiwgKGV2ZW50KSA9PiB7CiAgICAvL2NvbnNvbGUubG9nKCJhY3RpdmF0ZSIsIGV2ZW50KTsKfSk7CgpzZWxmLmFkZEV2ZW50TGlzdGVuZXIoInB1c2giLCAoZSkgPT4gewogICAgCiAgICBjb25zdCBib2R5ID0gZS5kYXRhLnRleHQoKSB8fCAiUHVzaCBtZXNzYWdlIGhhcyBubyBwYXlsb2FkIjsKCiAgICBjb25zdCBvcHRpb25zID0gewogICAgICAgIGJvZHksCiAgICAgICAgaWNvbjogImh0dHBzOi8vZ3RtZGVtb3N5c3RlbS5uZXB0dW5lLXNvZnR3YXJlLmNsb3VkL21lZGlhL3Jvb3QvRW1tYW51ZWxsYS9QdXNoJTIwTm90aWZpY2F0aW9uL2ZyZWUtbG9nby5wbmciLAogICAgICAgIHZpYnJhdGU6IFsxMDAsIDUwLCAxMDBdLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgZGF0ZU9mQXJyaXZhbDogRGF0ZS5ub3coKSwKICAgICAgICAgICAgcHJpbWFyeUtleTogMSwKICAgICAgICB9LAogICAgICAgIGFjdGlvbnM6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYWN0aW9uOiAiZXhwbG9yZSIsCiAgICAgICAgICAgICAgICB0aXRsZTogIk9wZW4gQXBwIiwKICAgICAgICAgICAgICAgIGljb246ICJodHRwczovL2d0bWRlbW9zeXN0ZW0ubmVwdHVuZS1zb2Z0d2FyZS5jbG91ZC9tZWRpYS9yb290L0VtbWFudWVsbGEvUHVzaCUyME5vdGlmaWNhdGlvbi9mcmVlLWxvZ28ucG5nIiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgCiAgICAgICAgXSwKICAgIH07CiAgICAvL2NvbnNvbGUubG9nKGJvZHkpOwogICAgZS53YWl0VW50aWwoCiAgICAgICAgc2VsZi5yZWdpc3RyYXRpb24uc2hvd05vdGlmaWNhdGlvbigiTm90aWZpY2F0aW9uIGZyb20gRmFjaWxpdHkgQWRtaW4iLCBvcHRpb25zKQogICAgKTsKfSk7CgpzZWxmLmFkZEV2ZW50TGlzdGVuZXIoIm5vdGlmaWNhdGlvbmNsaWNrIiwgKGV2ZW50KSA9PiB7CiAgICBjb25zdCBldmVudEFjdGlvbiA9IGV2ZW50LmFjdGlvbjsKICAgIGNvbnNvbGUubG9nKCJtZXNzYWdlIGV2ZW50IGZpcmVkISBldmVudCBhY3Rpb24gaXM6IiwgYCcke2V2ZW50QWN0aW9ufSdgKTsKICAgIC8vQWRkIGFjdGlvbiAKCiAgICBjb25zdCB1cmwgPSAiaHR0cHM6Ly9ndG1kZW1vc3lzdGVtLm5lcHR1bmUtc29mdHdhcmUuY2xvdWQvbGF1bmNocGFkL2RlbW8lMjBwdXNoJTIwbm90aWZpY2F0aW9uIjsKICAgIGV2ZW50Lm5vdGlmaWNhdGlvbi5jbG9zZSgpOyAvLyBBbmRyb2lkIG5lZWRzIGV4cGxpY2l0IGNsb3NlLgogICAgZXZlbnQud2FpdFVudGlsKAogICAgICAgIGNsaWVudHMubWF0Y2hBbGwoeyB0eXBlOiAid2luZG93IiB9KS50aGVuKCh3aW5kb3dDbGllbnRzKSA9PiB7CiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGFscmVhZHkgYSB3aW5kb3cvdGFiIG9wZW4gd2l0aCB0aGUgdGFyZ2V0IFVSTAogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdpbmRvd0NsaWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBjbGllbnQgPSB3aW5kb3dDbGllbnRzW2ldOwogICAgICAgICAgICAgICAgLy8gSWYgc28sIGp1c3QgZm9jdXMgaXQuCiAgICAgICAgICAgICAgICBpZiAoY2xpZW50LnVybCA9PT0gdXJsICYmICJmb2N1cyIgaW4gY2xpZW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsaWVudC5mb2N1cygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIElmIG5vdCwgdGhlbiBvcGVuIHRoZSB0YXJnZXQgVVJMIGluIGEgbmV3IHdpbmRvdy90YWIuCiAgICAgICAgICAgIGlmIChjbGllbnRzLm9wZW5XaW5kb3cpIHsKICAgICAgICAgICAgICAgIHJldHVybiBjbGllbnRzLm9wZW5XaW5kb3codXJsKTsKICAgICAgICAgICAgfQogICAgICAgIH0pCiAgICApOwp9KTsK